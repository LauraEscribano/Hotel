<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="/css/admin.css" />
    <link rel="stylesheet" href="/css/style.css"/>
</head>

<body>
    <%- include('../partials/adminPanel') %>

    

    <div class="container-xxl pt-5"> <!-- Reducimos el padding vertical -->
  
        <!-- Estadísticas rápidas - Versión más compacta -->
        <div class="row mb-3"> <!-- Menor margen inferior -->
          <div class="col-md-4 mb-3">
            <div class="card bg-primary h-100"> <!-- Altura completa -->
              <div class="card-body p-3"> <!-- Padding más ajustado -->
                <h6 class="card-title mb-2">Clientes</h6> <!-- Título más pequeño -->
                <p class="h2 mb-0 text-center"><%= totals.totalClients %></p> <!-- h2 en lugar de display-4 -->
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card bg-success h-100">
              <div class="card-body p-3">
                <h6 class="card-title mb-2">Hoteles</h6>
                <p class="h2 mb-0 text-center"><%= totals.totalHotels %></p>
              </div>
            </div>
          </div>
          
          <div class="col-md-4 mb-3">
            <div class="card bg-info h-100">
              <div class="card-body p-3">
                <h6 class="card-title mb-2">Reservas totales</h6>
                <p class="h2 mb-0 text-center"><%= totals.totalReservations %></p>
              </div>
            </div>
          </div>
        </div>
      
        <!-- Gráficos - Versión más equilibrada -->
        <div class="row mb-3">
          <div class="col-xl-6 mb-3"> <!-- Usamos xl en lugar de lg -->
            <div class="card h-100">
              <div class="card-header py-2">Nuevos clientes (6 meses)</div> <!-- Padding vertical reducido -->
              <div class="card-body p-3">
                <div class="chart-container" style="height: 250px"> <!-- Contenedor con altura fija -->
                  <canvas id="chartClients"></canvas>
                </div>
              </div>
            </div>
          </div>
          
          <div class="col-xl-6 mb-3">
            <div class="card h-100">
              <div class="card-header py-2">Reservas iniciadas (6 meses)</div>
              <div class="card-body p-3">
                <div class="chart-container" style="height: 250px">
                  <canvas id="chartReservations"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      
        <!-- Gráfico inferior más compacto -->
        <div class="row mb-3">
          <div class="col-xl-8 mx-auto"> <!-- Ancho limitado y centrado -->
            <div class="card">
              <div class="card-header py-2">Reservas por hotel (Top 10)</div>
              <div class="card-body p-3">
                <div class="chart-container" style="height: 300px">
                  <canvas id="chartByHotel"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      
      </div>
      
         
    <%- include('../partials/footer') %>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Parseamos los datos JSON inyectados
      const clientsData      = <%- clientsChart %>;
      const reservationsData = <%- reservationsChart %>;
      const byHotelData      = <%- byHotelChart %>;
    
      // 1) Nuevos clientes
      new Chart(
        document.getElementById('chartClients'),
        {
          type: 'bar',
          data: {
            labels: clientsData.labels,
            datasets: [{
              label: 'Clientes',
              data: clientsData.data
            }]
          },
          options: { responsive: true }
        }
      );
    
      // 2) Reservas mensuales
      new Chart(
        document.getElementById('chartReservations'),
        {
          type: 'line',
          data: {
            labels: reservationsData.labels,
            datasets: [{
              label: 'Reservas',
              data: reservationsData.data,
              fill: false,
              tension: 0.3
            }]
          },
          options: { responsive: true }
        }
      );
    
      // 3) Reservas por hotel
      new Chart(
        document.getElementById('chartByHotel'),
        {
          type: 'pie',
          data: {
            labels: byHotelData.labels,
            datasets: [{
              data: byHotelData.data
            }]
          },
          options: { responsive: true }
        }
      );
    </script>
    

        

        
        
</body>
</html>